!function(){"use strict";angular.module("geldzakenAngular",["ngResource","ui.router","ui.router.title","ngMaterial","toastr","LocalStorageModule"])}(),function(){"use strict";function t(t,e){return this.Group=t(e["private"]+"/groups/:group",{group:"@group"}),{Group:this.Group}}t.$inject=["$resource","api"],angular.module("geldzakenAngular").service("groupService",t)}(),function(){"use strict";function t(t){var e=this;return e.signup=function(t,e,n,o){},e.me=function(){return t.get("me")},e}t.$inject=["localStorageService"],angular.module("geldzakenAngular").service("userService",t)}(),function(){"use strict";function t(){function t(t,e,n){var o=this;o.toggleSidenav=function(){console.log("CLICK"),e("left").toggle().then(function(){t.debug("toggle LEFT is done")})},o.closeSidenav=function(){e("left").close().then(function(){t.debug("close LEFT is done")})}}t.$inject=["$log","$mdSidenav","userService"];var e={restrict:"E",templateUrl:"app/components/toolbar/toolbar.html",controller:t,controllerAs:"ctrl",bindToController:!0};return e}angular.module("geldzakenAngular").directive("toolbar",t)}(),function(){"use strict";function t(){function t(t,e,n){var o=this;o.logout=function(){n.logout()},o.go=function(n){e("left").close(),t.go(n)}}t.$inject=["$state","$mdSidenav","authentication"];var e={restrict:"E",templateUrl:"app/components/sidenav/sidenav.html",scope:{},controller:t,controllerAs:"ctrl",bindToController:!0};return e}angular.module("geldzakenAngular").directive("sidenav",t)}(),function(){"use strict";function t(){function t(t){var e=this;t.$on("$stateChangeStart",function(t,n,o,r,i){console.log("SHOW LOADER"),e.show=!0}),t.$on("$stateChangeSuccess",function(t,n,o,r,i){console.log("HIDE LOADER"),e.show=!1})}t.$inject=["$rootScope"];var e={restrict:"E",templateUrl:"app/components/loadingIndicator/loadingIndicator.html",scope:{},controller:t,controllerAs:"ctrl",bindToController:!0};return e}angular.module("geldzakenAngular").directive("loadingIndicator",t)}(),function(){"use strict";function t(t,e){function n(n){function r(t){return t.data}function i(e){t.error("XHR Failed for getContributors.\n"+angular.toJson(e.data,!0))}return n||(n=30),e.get(o+"/contributors?per_page="+n).then(r)["catch"](i)}var o="https://api.github.com/repos/Swiip/generator-gulp-angular",r={apiHost:o,getContributors:n};return r}t.$inject=["$log","$http"],angular.module("geldzakenAngular").factory("githubContributor",t)}(),function(){"use strict";function t(t){var e=this;return e.authorized=!1,e.clear=function(){this.authorized=!1},e.go=function(e){this.authorized=!0,t.go(e)},e.stateChange=function(n,o,r,i,a){!e.authorized&&o.authorized&&(n.preventDefault(),console.log("$stateChangeStart: unauthorized"),t.go("login"))},e}t.$inject=["$state"],angular.module("geldzakenAngular").service("authorization",t)}(),function(){"use strict";function t(t,e,n,o,r){var i=this;i.processSavedCredentials=function(){a()&&l()?(console.log("Authentication found credentials and is going to make a request."),d()):console.log("Authentication did not find any credentials. Login is required.")},i.requestToken=function(t,n,o){e.post(r["public"]+"/login",{email:t,password:n}).success(function(t,e,n,o){u(t.token),c(t.user.email),d()}).error(function(t,e,n,o){throw new Error("Error "+e+": "+t)})},i.logout=function(){n.remove("x-access-token","x-key","me"),o.clear(),console.log("Uitgelogd."),t.go("login")};var a=function(){return n.get("x-access-token")},l=function(){return n.get("x-key")},u=function(t){n.set("x-access-token",t)},c=function(t){n.set("x-key",t)},s=function(){e.defaults.headers.common={"x-access-token":a(),"x-key":l()}},d=function(){s(),e.get(r["private"]+"/users/"+l()).success(function(t,e,r,i){n.set("me",t),console.log("Request succeeded. Saving data and redirecting to groups."),o.go("groups")}).error(function(t,e,n,o){throw i.logout(),new Error("Error "+e+": "+t)})};return i}t.$inject=["$state","$http","localStorageService","authorization","api"],angular.module("geldzakenAngular").service("authentication",t)}(),function(){"use strict";function t(t,e){this.data=e.get("me")}t.$inject=["authorization","localStorageService"],angular.module("geldzakenAngular").controller("MainController",t)}(),function(){"use strict";function t(t,e){var n=this;n.user={email:"",password:""},n.login=function(){if(void 0==n.user||void 0==n.user.email||void 0==n.user.password)throw new Error("You must enter a valid e-mailadress and password.");e.requestToken(n.user.email,n.user.password)},console.log("LoginController loaded. Let's fire authentication.init()"),e.processSavedCredentials()}t.$inject=["authorization","authentication"],angular.module("geldzakenAngular").controller("LoginController",t)}(),function(){"use strict";function t(t,e,n,o){var r=this;r.group=o,r.participants_to_string=function(t){var e=_.map(t,function(t){return t.name.first+" "+t.name.last}),n=e.pop();return e.join(", ")+" and "+n}}t.$inject=["$stateParams","groupService","userService","group"],angular.module("geldzakenAngular").controller("GroupsShowController",t)}(),function(){"use strict";function t(t,e,n){var o=this;o.groups=e,o.me=function(t){var e=n.me();return _.find(t.participants,function(t){return t.user==e._id})},o.show=function(e){t.go("group",{id:e._id})}}t.$inject=["$state","groups","userService"],angular.module("geldzakenAngular").controller("GroupsOverviewController",t)}(),function(){"use strict";function t(t,e,n,o){t.$on("$stateChangeStart",o.stateChange),e.debug("runBlock end")}t.$inject=["$rootScope","$log","$state","authorization"],angular.module("geldzakenAngular").run(t)}(),function(){"use strict";function t(t,e){t.state("login",{url:"/login",templateUrl:"app/login/login.html",controller:"LoginController as ctrl",anonymous:!0,resolve:{$title:function(){return"Login"}}}).state("main",{url:"/",templateUrl:"app/main/main.html",controller:"MainController as main",authorized:!0,resolve:{$title:function(){return"Dashboard"}}}).state("groups",{url:"/groups",templateUrl:"app/groups/overview.html",controller:"GroupsOverviewController as ctrl",authorized:!0,resolve:{groups:["groupService",function(t){return t.Group.query().$promise}],$title:function(){return"Groups"}}}).state("group",{url:"/groups/:id",templateUrl:"app/groups/show.html",controller:"GroupsShowController as ctrl",authorized:!0,resolve:{group:["$stateParams","groupService",function(t,e){return e.Group.get({group:t.id}).$promise}],$title:["group",function(t){return t.name}]}}),e.otherwise("/")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("geldzakenAngular").config(t)}(),function(){"use strict";angular.module("geldzakenAngular").constant("api",{"public":"http://192.168.2.3:8080","private":"http://192.168.2.3:8080/secret"}).constant("moment",moment)}(),function(){"use strict";function t(t,e,n,o,r){n.theme("default").primaryPalette("indigo").accentPalette("grey"),t.decorator("$exceptionHandler",["$delegate",function(t){return function(t,e){alert(t)}}]),e.debugEnabled(!0),o.allowHtml=!0,o.timeOut=3e3,o.positionClass="toast-top-right",o.preventDuplicates=!0,o.progressBar=!0,r.setPrefix("geldzaken"),r.setStorageCookie(100,"/")}t.$inject=["$provide","$logProvider","$mdThemingProvider","toastrConfig","localStorageServiceProvider"],angular.module("geldzakenAngular").config(t)}(),angular.module("geldzakenAngular").run(["$templateCache",function(t){t.put("app/groups/overview.html",'<md-list><md-list-item ng-click="ctrl.show(group)" class="md-2-line" ng-repeat="group in ctrl.groups"><div class="md-list-item-text"><h3>{{ group.name }}</h3><p>My balance: &euro; {{ ctrl.me(group).balance }}</p></div></md-list-item></md-list>'),t.put("app/groups/show.html",'<md-tabs md-dynamic-height="" md-border-bottom="" class="md-primary"><md-tab label="payments"><md-content class="md-padding"><md-list><md-list-item ng-click="" class="md-2-line" ng-repeat="payment in ctrl.group.payments"><div class="md-list-item-text"><h3>&euro; {{ payment.amount }} payed by {{ payment.payer.name.first }}</h3><p>Participants: {{ ctrl.participants_to_string(payment.participants) }}</p></div></md-list-item></md-list></md-content></md-tab><md-tab label="participants"><md-content class="md-padding"><md-list><md-list-item ng-click="" class="md-2-line" ng-repeat="participant in ctrl.group.participants"><div class="md-list-item-text"><h3>{{ participant.user.name.first }} {{ participant.user.name.last }}</h3><h4>{{ participant.user._id }}</h4><p>Balance: &euro; {{ participant.balance }}</p></div></md-list-item></md-list></md-content></md-tab></md-tabs>'),t.put("app/main/main.html",'{{main.data}}<md-button class="md-raised" ng-click="main.clearAuth()">Clear Auth</md-button>'),t.put("app/login/login.html",'<div layout-gt-sm="column" layout-padding=""><md-content class="autoScroll"><md-input-container class="md-block"><label>E-mailadres</label> <input type="email" ng-model="ctrl.user.email"></md-input-container><md-input-container class="md-block"><label>Wachtwoord</label> <input ng-model="ctrl.user.password" type="password"></md-input-container><div class="bottom-sheet-demo inset" layout="column"><md-button type="submit" class="md-primary md-raised" ng-click="ctrl.login()">Login</md-button><md-button>I don\'t have an account</md-button></div></md-content></div>'),t.put("app/components/sidenav/sidenav.html",'<md-content><md-menu-item><md-button ng-click="ctrl.go(\'main\')"><md-icon class="material-icons" md-menu-align-target="">dashboard</md-icon>Dashboard</md-button></md-menu-item><md-menu-item><md-button ng-click="ctrl.go(\'groups\')"><md-icon class="material-icons" md-menu-align-target="">group</md-icon>Groups</md-button></md-menu-item><md-menu-item><md-button ng-click="ctrl.logout()"><md-icon class="material-icons" md-menu-align-target="">exit_to_app</md-icon>Logout</md-button></md-menu-item></md-content>'),t.put("app/components/toolbar/toolbar.html",'<md-toolbar class="md-primary"><div class="md-toolbar-tools"><md-button class="md-icon-button" ng-click="ctrl.toggleSidenav()" hide-gt-md="" aria-label="Settings"><md-icon class="material-icons">menu</md-icon></md-button><h2><span ng-bind="$title || \'Geldzaken\'"></span></h2><span flex=""></span><loading-indicator></loading-indicator></div></md-toolbar>'),t.put("app/components/loadingIndicator/loadingIndicator.html",'<span ng-if="ctrl.show"><md-progress-circular md-mode="indeterminate" class="md-accent"></md-progress-circular></span>')}]);
//# sourceMappingURL=../maps/scripts/app-d34a05abd9.js.map
